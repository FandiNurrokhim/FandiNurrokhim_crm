import{r as a,j as t,a as i}from"./app-DdujxetC.js";import{S as r}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{C as q,T as ee,a as I}from"./Card-DDsZeuq4.js";import y from"./CreateModal-CUSt63Oa.js";import te from"./EditModal-voszp3qF.js";import{R as se}from"./Rating-XxgJT9dk.js";import{L as ae}from"./LightboxImage-COwFDN6y.js";import{T as le}from"./TableActionButtons-BUabeUQR.js";import{L as ne}from"./LimitedText-Dj5mDYrI.js";import{g as E}from"./getErrorMessage-BiY5rOY1.js";import{u as oe}from"./useTranslation-8BayAZb4.js";import{F as re}from"./ShoppingBagIcon-wNwe_PpB.js";import{F as de}from"./CheckCircleIcon-D3sEOSCC.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./DangerButton-CR7n5plE.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./UploadInputWithView-BeMryQyC.js";import"./XMarkIcon-Duw6_-fQ.js";import"./imageHelper-19DfnHcd.js";import"./TrashIcon-DHaJCAft.js";function ie({title:s,titleId:o,...c},m){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":o},c),s?a.createElement("title",{id:o},s):null,a.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const ce=a.forwardRef(ie),ke=()=>{const{t:s,i18n:o}=oe(),[c,m]=a.useState([]),[C,d]=a.useState(!1),[f,h]=a.useState(1),[O,R]=a.useState(1),[S,b]=a.useState(!1),_=()=>b(!S),[L,j]=a.useState(!1),[M,D]=a.useState(null),[P,u]=a.useState(!1),[B,v]=a.useState(null),[A,p]=a.useState(!1),[F,$]=a.useState([]),[w,n]=a.useState(!1),[k,g]=a.useState(!1),[x,V]=a.useState(""),X=e=>{i.get(`/admin/stand/${e.id}/edit`).then(l=>{D(l.data.data),j(!0)}).catch(l=>{var N,T;n(!1);const Y=((T=(N=l.response)==null?void 0:N.data)==null?void 0:T.message)||"An error occurred.";r.fire(s("global.swalInfo"),Y,"info")})},Z=()=>{D(null),j(!1)},z=e=>{v(e),u(!0)},G=()=>{v(null),u(!1)},H=()=>{n(!0),i.delete(`/admin/stand/${B}`).then(()=>{n(!1),u(!1),r.fire(s("global.swalDeleted","Deleted!"),s("stand.deletedMessage","Ingredient has been deleted."),"success"),d(e=>!e)}).catch(e=>{n(!1);const l=E(e,s,o.language);r.fire(s("global.swalInfo","Error!"),l,"info")})},J=e=>{$(e),p(!0)},K=()=>{n(!0),i.post(route("admin.stand.bulk-delete"),{ids:F}).then(()=>{n(!1),p(!1),r.fire("Deleted!","Selected stand have been deleted.","success"),d(e=>!e)}).catch(e=>{n(!1);const l=E(e,s,o.language);r.fire("Error!",l,"error")})},Q=e=>{V(e),e!==x&&h(1)},U=()=>{g(!0),i.get("/admin/stand/data",{params:{page:f,search:x,filter:"all"}}).then(e=>{m(e.data.data),R(e.data.last_page),g(!1)}).catch(e=>{g(!1)})};a.useEffect(()=>{U()},[f,x,C]);const W=[{header:s("global.name"),accessor:"name",className:"text-center"},{header:s("global.image"),accessor:e=>e.image?t.jsx(ae,{src:`/${e.image}`,alt:e.name,className:"h-12 w-12 object-cover rounded"}):t.jsx("span",{className:"text-gray-400 italic",children:"-"})},{header:s("global.description"),accessor:e=>{const l=o.language==="en"?e.description_en:e.description_id;return t.jsx(ne,{text:l,limit:5})}},{header:s("global.foodSummary"),accessor:e=>t.jsxs("div",{className:"flex flex-col items-center gap-1 text-sm",children:[t.jsxs("div",{className:"w-full flex justify-between items-center gap-2",children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:s("global.total","Total")}),t.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 font-medium px-2.5 py-0.5 rounded-full",children:[t.jsx(re,{className:"w-4 h-4 text-blue-600"}),e.total_foods]})]}),t.jsxs("div",{className:"w-full flex justify-between items-center gap-2",children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:s("global.active","Active")}),t.jsxs("span",{className:"inline-flex items-center gap-1 bg-green-100 text-green-800 font-medium px-2.5 py-0.5 rounded-full",children:[t.jsx(de,{className:"w-4 h-4 text-green-600"}),e.total_active_foods]})]}),t.jsxs("div",{className:"w-full flex justify-between items-center gap-2",children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:s("global.inactive","Inactive")}),t.jsxs("span",{className:"inline-flex items-center gap-1 bg-red-100 text-red-800 font-medium px-2.5 py-0.5 rounded-full",children:[t.jsx(ce,{className:"w-4 h-4 text-red-600"}),e.total_not_active_foods]})]})]}),className:"text-center"},{header:"Rating",className:"text-center",accessor:e=>t.jsx("div",{className:"flex justify-center",children:t.jsx(se,{rating:e.rating,userReviewCount:e.total_reviews_count,detailView:!0})})},{header:s("global.actions"),accessor:e=>t.jsx(le,{onEdit:()=>X(e),onDelete:()=>z(e.id)})}];return t.jsxs(q,{children:[t.jsx(ee,{columns:W,data:c,currentPage:f,totalPages:O,onSearch:Q,onPageChange:e=>h(e),onAdd:()=>b(!0),addType:"modal",addButtonText:s("stand.pageTitle"),AddModalContent:y,selectable:!0,onDeleteSelected:J,isProcessing:k}),t.jsx(y,{isOpen:S,onClose:_,setRefetch:d}),M&&t.jsx(te,{isOpen:L,onClose:Z,stand:M,setRefetch:d}),t.jsx(I,{isOpen:P,onClose:G,onDelete:H,title:s("stand.deleteTitle"),description:s("stand.deleteDescription"),deleteButtonText:s("stand.deleteButton"),isProcessing:w}),t.jsx(I,{isOpen:A,onClose:()=>p(!1),onDelete:K,title:s("stand.deleteSelectedTitle","Delete Selected Ingredients"),description:s("stand.deleteSelectedDescription","Are you sure you want to delete the selected ingredients? This action cannot be undone."),deleteButtonText:s("stand.deleteSelectedButton","Delete Selected"),isProcessing:w})]})};export{ke as default};
