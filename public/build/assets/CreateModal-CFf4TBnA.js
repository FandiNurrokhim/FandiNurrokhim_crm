import{v as M,q,r as g,j as e}from"./app-DdujxetC.js";import{C as F,S as P,a as D,P as E}from"./lib-B8fTtbY3.js";/* empty css              */import{S as u}from"./react-select.esm-DoIX5jeO.js";import{S as j}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{M as k}from"./Modal-C4vY61V8.js";import{I as r}from"./InputLabel-BzWnVHML.js";import{T as d}from"./TextInput-BmMh6PqU.js";import{I as m}from"./InputError-Cg3yzoP4.js";import{U as T}from"./UploadInputWithView-BeMryQyC.js";import{a as V}from"./getErrorMessage-BiY5rOY1.js";import{u as U}from"./useTranslation-8BayAZb4.js";import"./toConsumableArray-Bj8NDksB.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./XMarkIcon-Duw6_-fQ.js";const le=({isOpen:f,onClose:c,setRefetch:y})=>{const{t:s,i18n:C}=U(),{data:l,setData:t,post:w,processing:N,errors:o,reset:h}=M({name:"",email:"",password:"",phone:"",address:"",country:"",role:"",state:"",city:"",image:null,message:""}),n=q().props.roles,x=g.useMemo(()=>F.getAllCountries().map(a=>({value:a.isoCode,label:a.name})),[]),b=g.useMemo(()=>l.country?P.getStatesOfCountry(l.country).map(a=>({value:a.isoCode,label:a.name})):[],[l.country]),v=g.useMemo(()=>l.country&&l.state?D.getCitiesOfState(l.country,l.state).map(a=>({value:a.name,label:a.name})):[],[l.country,l.state]),i=a=>{t(a.target.name,a.target.value)},S=a=>{a.preventDefault(),w("/admin/user",{onSuccess:()=>{h(),c(),y(p=>!p),j.fire({icon:"success",title:s("global.swalSuccess"),text:s("user.createdMessage")})},onError:p=>{const I=V(p.message,C.language);j.fire("Error!",I,"error")}})};return e.jsxs(k,{show:f,onClose:c,title:s("global.user"),type:"add",maxWidth:"5xl",onCancel:()=>{c(),h()},processing:N,onSubmit:S,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s("global.accountData")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",value:s("global.name"),required:!0}),e.jsx(d,{id:"name",name:"name",value:l.name,onChange:i,className:"mt-1 block w-full",required:!0,autoComplete:"name",placeholder:s("global.name")}),e.jsx(m,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"email",value:s("global.email"),required:!0}),e.jsx(d,{id:"email",name:"email",value:l.email||"",onChange:i,className:"mt-1 block w-full",required:!0,autoComplete:"email",type:"email",placeholder:s("global.email")}),e.jsx(m,{message:o.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"password",value:s("global.password"),required:!0}),e.jsx(d,{id:"password",name:"password",value:l.password||"",onChange:i,className:"mt-1 block w-full",autoComplete:"new-password",type:"password",placeholder:s("global.password"),required:!0}),e.jsx(m,{message:o.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"role",value:s("role.pageTitle"),required:!0}),e.jsx(u,{options:(n==null?void 0:n.map(a=>({value:a.id,label:a.name})))||[],id:"role",name:"role",value:(n==null?void 0:n.map(a=>({value:a.id,label:a.name})).find(a=>a.value===l.role))||null,onChange:a=>t("role",a?a.value:""),placeholder:s("role.pageTitle"),isClearable:!0,menuPlacement:"auto",menuShouldScrollIntoView:!1,className:"mt-1 block w-full",required:!0}),e.jsx(m,{message:o.role,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s("global.personalData")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"phone",value:s("global.phone")}),e.jsx(E,{country:"id",value:l.phone,onChange:a=>t("phone",a),inputClass:"!rounded-md !border-gray-300 !shadow-sm focus:!border-indigo-500 focus:!ring-indigo-500 !w-full !pl-12 !pr-3 py-2",buttonClass:"!bg-white !border-r !border-gray-300 !rounded-l-md",containerClass:"!w-full"}),e.jsx(m,{message:o.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"address",value:s("global.address")}),e.jsx(d,{id:"address",name:"address",value:l.address||"",onChange:i,className:"mt-1 block w-full",autoComplete:"address",placeholder:s("global.address")}),e.jsx(m,{message:o.address,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"country",value:s("global.country")}),e.jsx(u,{options:x,id:"country",name:"country",value:x.find(a=>a.value===l.country)||null,onChange:a=>{t("country",a?a.value:""),t("state",""),t("city","")},placeholder:s("global.country"),isClearable:!0,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(m,{message:o.country,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"state",value:s("global.state")}),e.jsx(u,{options:b,id:"state",name:"state",value:b.find(a=>a.value===l.state)||null,onChange:a=>{t("state",a?a.value:""),t("city","")},placeholder:s("global.state"),isClearable:!0,isDisabled:!l.country,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(m,{message:o.state,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"city",value:s("global.city")}),e.jsx(u,{options:v,id:"city",name:"city",value:v.find(a=>a.value===l.city)||null,onChange:a=>{t("city",a?a.value:"")},placeholder:s("global.city"),isClearable:!0,isDisabled:!l.state,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(m,{message:o.city,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s("global.photoProfile")}),e.jsx(T,{id:"image",name:"image",label:s("global.image"),accept:".jpg,.jpeg,.png",maxSizeMB:.5,onChange:a=>t("image",a.target.files[0]),value:l.image,error:o.image})]})]})};export{le as default};
