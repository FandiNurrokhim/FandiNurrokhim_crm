import{q as N,v as I,r as d,j as e,m as w}from"./app-DdujxetC.js";import{s as P}from"./Toast-BkAQvP14.js";import{I as m}from"./InputError-Cg3yzoP4.js";import{I as n}from"./InputLabel-BzWnVHML.js";import{P as F}from"./PrimaryButton-DWDteuQq.js";import{T as c}from"./TextInput-BmMh6PqU.js";import{S as p}from"./react-select.esm-DoIX5jeO.js";import{C as E,S as M,a as D,P as T}from"./lib-B8fTtbY3.js";/* empty css              */import{U as V}from"./UploadInputWithView-BeMryQyC.js";import{a as k}from"./getErrorMessage-BiY5rOY1.js";import{u as q}from"./useTranslation-8BayAZb4.js";import{L}from"./index-CZ0tZ6fy.js";import"./toConsumableArray-Bj8NDksB.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./XMarkIcon-Duw6_-fQ.js";function se({mustVerifyEmail:U,status:_,className:f=""}){const r=N().props.auth.user,{t,i18n:j}=q(),{data:s,setData:o,processing:y,errors:l,reset:v}=I({name:r.name||"",email:r.email||"",phone:r.phone||"",address:r.address||"",country:r.country||"",state:r.state||"",city:r.city||"",image:r.photo_profile||"",message:""}),b=a=>{a.preventDefault();const i={...s,_method:"put"};i.image&&typeof i.image!="object"&&delete i.image,w.post(route("profile.update"),{...i,_method:"put"},{onSuccess:()=>{v(),P(t("user.updatedMessage"),"success")},onError:C=>{const S=k(C.message,j.language);Swal.fire("Error!",S,"error")}})},g=d.useMemo(()=>E.getAllCountries().map(a=>({value:a.isoCode,label:a.name})),[]),h=d.useMemo(()=>s.country?M.getStatesOfCountry(s.country).map(a=>({value:a.isoCode,label:a.name})):[],[s.country]),x=d.useMemo(()=>s.country&&s.state?D.getCitiesOfState(s.country,s.state).map(a=>({value:a.name,label:a.name})):[],[s.country,s.state]),u=a=>{o(a.target.name,a.target.value)};return e.jsxs("section",{className:f,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t("profile.updateProfileInformation")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t("profile.updateProfileInformationDescription")})]}),e.jsxs("form",{onSubmit:b,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",value:t("global.name")}),e.jsx(c,{id:"name",name:"name",className:"mt-1 block w-full",value:s.name,onChange:u,required:!0,isFocused:!0,autoComplete:"name"}),e.jsx(m,{className:"mt-2",message:l.name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:"Email"}),e.jsx(c,{id:"email",name:"email",type:"email",className:"mt-1 block w-full",value:s.email,onChange:u,required:!0,autoComplete:"username"}),e.jsx(m,{className:"mt-2",message:l.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:t("global.personalData")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",value:t("global.phone")}),e.jsx(T,{country:"id",value:s.phone,onChange:a=>o("phone",a),inputClass:"!rounded-md !border-gray-300 !shadow-sm focus:!border-indigo-500 focus:!ring-indigo-500 !w-full !pl-12 !pr-3 py-2",buttonClass:"!bg-white !border-r !border-gray-300 !rounded-l-md",containerClass:"!w-full"}),e.jsx(m,{message:l.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"address",value:t("global.address")}),e.jsx(c,{id:"address",name:"address",value:s.address||"",onChange:u,className:"mt-1 block w-full",autoComplete:"address",placeholder:"Address"}),e.jsx(m,{message:l.address,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"country",value:t("global.country")}),e.jsx(p,{options:g,id:"country",name:"country",value:g.find(a=>a.value===s.country)||null,onChange:a=>{o("country",a?a.value:""),o("state",""),o("city","")},placeholder:"Country",isClearable:!0,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(m,{message:l.country,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"state",value:t("global.state")}),e.jsx(p,{options:h,id:"state",name:"state",value:h.find(a=>a.value===s.state)||null,onChange:a=>{o("state",a?a.value:""),o("city","")},placeholder:"State",isClearable:!0,isDisabled:!s.country,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(m,{message:l.state,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"city",value:t("global.city")}),e.jsx(p,{options:x,id:"city",name:"city",value:x.find(a=>a.value===s.city)||null,onChange:a=>{o("city",a?a.value:"")},placeholder:"City",isClearable:!0,isDisabled:!s.state,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(m,{message:l.city,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(n,{htmlFor:"city",value:t("global.photoProfile")}),e.jsx(V,{id:"image",name:"image",label:"Image",accept:".jpg,.jpeg,.png",maxSizeMB:.5,onChange:a=>o("image",a.target.files[0]),value:s.image,error:l.image})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(F,{disabled:y,children:t("global.save")})})]}),e.jsx(L,{})]})}export{se as default};
