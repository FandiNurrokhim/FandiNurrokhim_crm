import{r as a,j as s,a as c}from"./app-DdujxetC.js";import{S as l}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{C as q,T as ee,a as T}from"./Card-DDsZeuq4.js";import j from"./CreateModal-CrjmpsSW.js";import te from"./EditModal-DA4hcLye.js";import{T as ae}from"./TableActionButtons-BUabeUQR.js";import{L as se}from"./LightboxImage-COwFDN6y.js";import{g as E}from"./getErrorMessage-BiY5rOY1.js";import{S as oe}from"./StatusBadge-DAC0m8gs.js";import{u as re}from"./useTranslation-8BayAZb4.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./DangerButton-CR7n5plE.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./ActiveToogle-B-WZcVjZ.js";import"./UploadInputWithView-BeMryQyC.js";import"./XMarkIcon-Duw6_-fQ.js";import"./TrashIcon-DHaJCAft.js";import"./imageHelper-19DfnHcd.js";const ke=()=>{const{t,i18n:d}=re(),[I,O]=a.useState([]),[P,n]=a.useState(!1),[i,f]=a.useState(1),[B,A]=a.useState(1),[S,h]=a.useState(!1),_=()=>h(!S),[k,y]=a.useState(!1),[v,D]=a.useState(null),[L,g]=a.useState(!1),[N,x]=a.useState(null),[$,u]=a.useState(!1),[R,w]=a.useState([]),[M,r]=a.useState(!1),[K,m]=a.useState(!1),[p,z]=a.useState(""),F=e=>{c.get(`/admin/category/${e.id}/edit`).then(o=>{D(o.data.data),y(!0)}).catch(o=>{var C,b;r(!1);const Z=((b=(C=o.response)==null?void 0:C.data)==null?void 0:b.message)||"An error occurred.";l.fire("Error!",Z,"error")})},G=()=>{D(null),y(!1)},H=e=>{x(e),g(!0)},J=()=>{x(null),g(!1)},Q=()=>{r(!0),c.delete(`/admin/category/${N}`).then(()=>{r(!1),g(!1),l.fire(t("global.swalDeleted","Deleted!"),t("category.deletedMessage","Ingredient has been deleted."),"success"),n(e=>!e)}).catch(e=>{r(!1);const o=E(e,t,d.language);l.fire(t("global.swalError","Error!"),o,"error")})},U=e=>{w(e),u(!0)},V=()=>{r(!0),c.post(route("admin.category.bulk-delete"),{ids:R}).then(()=>{r(!1),u(!1),l.fire("Deleted!","Selected category have been deleted.","success"),n(e=>!e)}).catch(e=>{r(!1);const o=E(e,t,d.language);l.fire("Error!",o,"error")})},W=e=>{z(e),e!==p&&f(1)},X=()=>{m(!0),c.get("/admin/category/data",{params:{page:i,search:p,filter:"all"}}).then(e=>{O(e.data.data),A(e.data.last_page),m(!1)}).catch(e=>{m(!1)})};a.useEffect(()=>{X()},[i,p,P]);const Y=[{header:t("global.image"),accessor:e=>e.image?s.jsx(se,{src:`/${e.image}`,alt:e.name,className:"h-12 w-full object-cover rounded"}):s.jsx("span",{className:"text-gray-400 italic",children:"-"})},{header:t("global.name"),accessor:e=>d.language==="en"?e.name_en:e.name_id},{header:"Slug",accessor:"slug"},{header:"Status",accessor:e=>s.jsx(oe,{value:e.is_active})},{header:t("global.actions"),accessor:e=>["Makanan","Minuman","Kudapan"].includes(e.name_id)?s.jsx("span",{className:"text-xs text-gray-400 italic",children:"3 kategori utama tidak dapat diubah"}):s.jsx(ae,{onEdit:()=>F(e),onDelete:()=>H(e.id)})}];return s.jsxs(q,{children:[s.jsx(ee,{columns:Y,data:I,currentPage:i,totalPages:B,onSearch:W,onPageChange:e=>f(e),onAdd:()=>h(!0),addType:"modal",addButtonText:t("category.pageTitle"),AddModalContent:j,selectable:!0,onDeleteSelected:U,isProcessing:K}),s.jsx(j,{isOpen:S,onClose:_,setRefetch:n}),s.jsx(te,{isOpen:k,onClose:G,category:v,setRefetch:n}),s.jsx(T,{isOpen:L,onClose:J,onDelete:Q,title:t("category.deleteTitle","Delete Category"),description:t("category.deleteDescription","Are you sure you want to delete this ingredient? This action cannot be undone."),deleteButtonText:t("category.deleteButton","Delete Category"),isProcessing:M}),s.jsx(T,{isOpen:$,onClose:()=>u(!1),onDelete:V,title:t("category.deleteSelectedTitle","Delete Selected Ingredients"),description:t("category.deleteSelectedDescription","Are you sure you want to delete the selected ingredients? This action cannot be undone."),deleteButtonText:t("category.deleteSelectedButton","Delete Selected"),isProcessing:M})]})};export{ke as default};
