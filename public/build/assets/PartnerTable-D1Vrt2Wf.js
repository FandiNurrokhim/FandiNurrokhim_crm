import{r as s,j as a,a as d}from"./app-DdujxetC.js";import{S as l}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{F as q,C as ee,T as te,a as w}from"./Card-DDsZeuq4.js";import{D as se}from"./DangerButton-CR7n5plE.js";import C from"./CreateModal-C32hsNBK.js";import ae from"./EditModal-Bh_mq9d5.js";import{L as re}from"./LightboxImage-COwFDN6y.js";import{g as E}from"./getErrorMessage-BiY5rOY1.js";import{u as oe}from"./useTranslation-8BayAZb4.js";import{F as le}from"./TrashIcon-DHaJCAft.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./UploadInputWithView-BeMryQyC.js";import"./XMarkIcon-Duw6_-fQ.js";import"./imageHelper-19DfnHcd.js";const Be=()=>{const{t,i18n:f}=oe(),[T,y]=s.useState([]),[O,n]=s.useState(!1),[c,g]=s.useState(1),[I,B]=s.useState(1),[h,x]=s.useState(!1),N=()=>x(!h),[v,S]=s.useState(!1),[A,b]=s.useState(null),[k,i]=s.useState(!1),[F,D]=s.useState(null),[L,p]=s.useState(!1),[R,$]=s.useState([]),[M,r]=s.useState(!1),[_,u]=s.useState(!1),[m,z]=s.useState(""),G=e=>{d.get(`/admin/partner/${e.id}/edit`).then(o=>{b(o.data.data),S(!0)}).catch(o=>{var j,P;r(!1);const Z=((P=(j=o.response)==null?void 0:j.data)==null?void 0:P.message)||"An error occurred.";l.fire("Error!",Z,"error")})},H=()=>{b(null),S(!1)},J=e=>{D(e),i(!0)},K=()=>{D(null),i(!1)},Q=()=>{r(!0),d.delete(`/admin/partner/${F}`).then(()=>{r(!1),i(!1),l.fire(t("global.swalDeleted","Deleted!"),t("partner.deletedMessage","partner has been deleted."),"success"),n(e=>!e)}).catch(e=>{r(!1);const o=E(e,t,f.language);l.fire(t("global.swalError","Error!"),o,"error")})},U=e=>{$(e),p(!0)},V=()=>{r(!0),d.post(route("admin.partner.bulk-delete"),{ids:R}).then(()=>{r(!1),p(!1),l.fire("Deleted!","Selected partners have been deleted.","success"),n(e=>!e)}).catch(e=>{r(!1);const o=E(e,t,f.language);l.fire("Error!",o,"error")})},W=e=>{z(e),e!==m&&g(1)},X=()=>{u(!0),d.get("/admin/partner/data",{params:{page:c,search:m}}).then(e=>{y(e.data.data),B(e.data.last_page),u(!1)}).catch(e=>{u(!1)})};s.useEffect(()=>{X()},[c,m,O]);const Y=[{header:t("global.name"),accessor:"name"},{header:t("global.image"),accessor:e=>e.image?a.jsx(re,{src:`/${e.image}`,alt:e.name,className:"h-12 w-full object-cover rounded"}):a.jsx("span",{className:"text-gray-400 italic",children:"-"})},{header:t("global.actions"),accessor:e=>a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs("button",{onClick:()=>G(e),className:"inline-flex items-center rounded-md border border-transparent bg-yellow-400 px-2 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 active:bg-yellow-700",children:[a.jsx(q,{className:"w-5 h-5 me-2 rounded-full bg-yellow-500 p-1 text-white"})," ",a.jsx("span",{children:t("global.edit")})]}),a.jsxs(se,{onClick:()=>J(e.id),children:[a.jsx(le,{className:"w-5 h-5 me-2 rounded-full bg-red-400 p-1 text-white"})," ",a.jsx("span",{children:t("global.delete")})]})]})}];return a.jsxs(ee,{children:[a.jsx(te,{columns:Y,data:T,currentPage:c,totalPages:I,onSearch:W,onPageChange:e=>g(e),onAdd:()=>x(!0),addType:"modal",addButtonText:t("partner.createButton","Partner"),AddModalContent:C,selectable:!0,onDeleteSelected:U,isProcessing:_}),a.jsx(C,{isOpen:h,onClose:N,setRefetch:n}),a.jsx(ae,{isOpen:v,onClose:H,partner:A,setRefetch:n}),a.jsx(w,{isOpen:k,onClose:K,onDelete:Q,title:t("partner.deleteTitle","Delete Partner"),description:t("partner.deleteDescription","Are you sure you want to delete this partner? This action cannot be undone."),deleteButtonText:t("partner.deleteButton","Delete Partner"),isProcessing:M}),a.jsx(w,{isOpen:L,onClose:()=>p(!1),onDelete:V,title:t("partner.deleteSelectedTitle","Delete Selected Partners"),description:t("partner.deleteSelectedDescription","Are you sure you want to delete the selected partner? This action cannot be undone."),deleteButtonText:t("partner.deleteSelectedButton","Delete Selected"),isProcessing:M})]})};export{Be as default};
