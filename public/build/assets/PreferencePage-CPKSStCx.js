import{j as r,q as R,r as m,m as y}from"./app-DdujxetC.js";import{g as v}from"./imageHelper-19DfnHcd.js";import{T as A}from"./TextInput-BmMh6PqU.js";import{L as $}from"./LanguageDropdown-CZVTQBmi.js";import{S as c}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{u as D}from"./useTranslation-8BayAZb4.js";import{F}from"./CheckCircleIcon-D3sEOSCC.js";function h({label:o,imageUrl:s,selected:g,onClick:d}){const n=s?v(s):null;return console.log("Image Path:",n),r.jsxs("button",{onClick:d,className:`flex items-center gap-2 px-4 py-2 rounded-full border text-sm font-medium shadow-sm transition-all duration-200 ${g?"bg-yellow-300 text-black border-transparent":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[s&&r.jsx("img",{src:v(s),alt:o,className:"w-6 h-6 object-fill bg-white rounded-full"}),o]})}function G(){const{categories:o=[],mainCategories:s=[],ingredients:g=[],maxPrice:d=5e5}=R().props,{t:n,i18n:u}=D(),N=Array.isArray(o)?o:Object.values(o),w=Array.isArray(s)?s:Object.values(s),C=Array.isArray(g)?g:Object.values(g),[a,S]=m.useState([]),[i,_]=m.useState([]),[l,T]=m.useState([]),[f,k]=m.useState(),[P,I]=m.useState(!1);m.useEffect(()=>{localStorage.getItem("preferences")&&(I(!0),setTimeout(()=>{y.visit("/home")},1e3))},[]);const x=(e,t,b,j=5,B="kategori")=>{t.includes(e)?b(p=>p.filter(E=>E!==e)):t.length>=j?c.fire({icon:"warning",title:"Batas maksimum",text:`Maksimal memilih ${j} ${B}.`,timer:2e3,showConfirmButton:!1}):b(p=>[...p,e])},M=()=>{if(f){if(f<2e4||f>(d||5e5)){c.fire({icon:"warning",title:n("preference.alerts.invalidBudgetTitle"),text:n("preference.alerts.invalidBudgetText",{maxPrice:`Rp ${(d||5e5).toLocaleString("id-ID")}`})});return}}else{c.fire({icon:"warning",title:n("preference.alerts.emptyBudgetTitle"),text:n("preference.alerts.emptyBudgetText")});return}if(a.length<1){c.fire({icon:"warning",title:n("preference.alerts.noMainCategoryTitle"),text:n("preference.alerts.noMainCategoryText")});return}else if(a.length>2){c.fire({icon:"info",title:n("preference.alerts.maxMainCategoryTitle"),text:n("preference.alerts.maxMainCategoryText")});return}if(i.length<2){c.fire({icon:"warning",title:n("preference.alerts.notEnoughCategoryTitle"),text:n("preference.alerts.notEnoughCategoryText")});return}if(l.length<3){c.fire({icon:"warning",title:n("preference.alerts.notEnoughIngredientTitle"),text:n("preference.alerts.notEnoughIngredientText")});return}const t={categories:[...a,...i],ingredients:l,budget:f};localStorage.setItem("preferences",JSON.stringify(t)),y.visit("/home")};return P?r.jsxs("div",{className:"h-screen flex flex-col items-center justify-center py-12",children:[r.jsx("div",{className:"bg-green-100 rounded-full p-6 flex items-center justify-center mb-4",children:r.jsx(F,{className:"w-12 h-12 text-green-500"})}),r.jsx("div",{className:"text-gray-700 text-lg font-medium mb-2",children:n("preference.setSuccess")}),r.jsx("div",{className:"text-gray-500 mb-4",children:n("preference.redirectingToHome")}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("span",{className:"animate-bounce",children:"."}),r.jsx("span",{className:"animate-bounce delay-150",children:"."}),r.jsx("span",{className:"animate-bounce delay-300",children:"."})]})]}):r.jsxs("div",{className:"p-6 max-w-lg mx-auto",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:n("preference.choose")}),r.jsx($,{})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold",children:n("preference.mainCategory")}),r.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(e=>{const t=u.language==="en"?e.name_en:e.name_id;return r.jsx(h,{label:t,imageUrl:e.image,selected:a.includes(e.name_id),disabled:a.length>=2&&!a.includes(e.name_id),info:a.length>=2&&!a.includes(e.name_id)?"Maksimal tercapai":null,onClick:()=>x(e.name_id,a,S,2,"kategori utama")},e.id)})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold",children:n("home.flavor")}),r.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(e=>{const t=u.language==="en"?e.name_en:e.name_id;return r.jsx(h,{label:t,imageUrl:e.image,selected:i.includes(e.name_id),disabled:i.length>=4&&!i.includes(e.name_id),info:i.length>=4&&!i.includes(e.name_id)?"Maksimal tercapai":null,onClick:()=>x(e.name_id,i,_,4,"rasa")},e.id)})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold",children:n("preference.ingredients")}),r.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(e=>{const t=u.language==="en"?e.name_en:e.name_id;return r.jsx(h,{label:t,imageUrl:e.image,selected:l.includes(e.name_id),disabled:l.length>=6&&!l.includes(e.name_id),info:l.length>=6&&!l.includes(e.name_id)?"Maksimal tercapai":null,onClick:()=>x(e.name_id,l,T,6,"bahan")},e.id)})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold mb-2",children:n("preference.yourBudget")}),r.jsx("div",{className:" items-center gap-4 w-full",children:r.jsx(A,{type:"number",min:2e4,max:d||5e5,step:1e3,value:f,onChange:e=>k(e.target.value),className:"w-full flex-1 border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Rp. 20000",required:!0})}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n("preference.maxPrice",{price:`Rp ${d||1e5}`})})]}),r.jsx("button",{className:"bg-[#D9B36A] text-[#0E1C2D] hover:bg-[#caa45f] rounded-md w-full px-4 py-1.5 text-lg font-semibold transition",onClick:M,children:n("preference.save")})]})}export{G as default};
