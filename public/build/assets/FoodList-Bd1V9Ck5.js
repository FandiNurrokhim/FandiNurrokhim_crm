import{r as t,j as s,Y as j,a as F}from"./app-DdujxetC.js";const I=({isLoggedIn:b})=>{const[a,v]=t.useState([]),[r,f]=t.useState(""),[d,i]=t.useState([]),[y,p]=t.useState([]),[w,S]=t.useState([]),[l,N]=t.useState([]),[g,m]=t.useState(!1),[u,x]=t.useState(null);t.useEffect(()=>{const e=JSON.parse(localStorage.getItem("preferences"))||{categories:[],ingredients:[]};p(e.categories),S(e.ingredients);const n=JSON.parse(sessionStorage.getItem("excludedFoods"))||[],o=a.filter(c=>!n.includes(c.id));N(o.length>0?o:a)},[a]),t.useEffect(()=>{if(!r.trim()){i([]);return}const n=setTimeout(async()=>{m(!0),x(null);try{const o=JSON.parse(localStorage.getItem("preferences"))||{},c=await F.get("/get-foods",{params:{search:r,categories:o.categories||[],ingredients:o.ingredients||[]}});i(c.data)}catch{x("Error fetching foods. Please try again.")}finally{m(!1)}},800);return()=>clearTimeout(n)},[r]);const h=t.useMemo(()=>r.trim()?d:l,[r,d,l]);return s.jsxs("div",{className:"mx-auto max-w-4xl p-5",children:[s.jsx("input",{type:"text",placeholder:"Search for food...",value:r,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring focus:ring-blue-400"}),g&&s.jsx("p",{className:"mt-3 text-center text-gray-500",children:"Loading..."}),u&&s.jsx("p",{className:"mt-3 text-center text-red-500",children:u}),s.jsx("div",{className:"mt-5 grid grid-cols-1 gap-5 md:grid-cols-2",children:h.length>0?h.map(e=>s.jsx(j,{href:route("foods.show",{id:e.id}),className:"block",children:s.jsxs("div",{className:"flex overflow-hidden rounded-lg bg-white shadow-md transition hover:bg-gray-100",children:[s.jsx("img",{src:`/images/${e.image}`,alt:e.name,className:"h-32 w-32 object-cover"}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-600 hover:underline",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.description?e.description.substring(0,50):"","..."]}),s.jsxs("p",{className:"mt-1 font-bold text-green-600",children:["Rp ",e.price]})]})]})},e.id)):!g&&s.jsx("p",{className:"col-span-2 text-center text-gray-500",children:"No food found."})})]})};export{I as default};
