import{j as s,r as a,a as u}from"./app-DdujxetC.js";import{S as i}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{C as ee,T as te,a as E}from"./Card-DDsZeuq4.js";import C from"./CreateModal-BArrxQ5C.js";import se from"./EditModal-CP_t3gZo.js";import{L as x}from"./LimitedText-Dj5mDYrI.js";import{L as ae}from"./LightboxImage-COwFDN6y.js";import{F as oe}from"./HeartIcon-BIzo_fDE.js";import{R as re}from"./Rating-XxgJT9dk.js";import{S as ne}from"./StatusBadge-DAC0m8gs.js";import{T as le}from"./TableActionButtons-BUabeUQR.js";import{g as O}from"./getErrorMessage-BiY5rOY1.js";import{u as ce}from"./useTranslation-8BayAZb4.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./DangerButton-CR7n5plE.js";import"./react-select.esm-DoIX5jeO.js";import"./toConsumableArray-Bj8NDksB.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./ActiveToogle-B-WZcVjZ.js";import"./UploadInputWithView-BeMryQyC.js";import"./XMarkIcon-Duw6_-fQ.js";import"./imageHelper-19DfnHcd.js";import"./TrashIcon-DHaJCAft.js";function ie({count:t}){return s.jsxs("div",{className:"flex justify-center items-center gap-1 text-red-500",children:[s.jsx(oe,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:t})]})}const Ge=()=>{const{t,i18n:c}=ce(),[I,v]=a.useState([]),[N,d]=a.useState(!1),[m,S]=a.useState(1),[R,y]=a.useState(1),[j,D]=a.useState(!1),B=()=>D(!j),[A,M]=a.useState(!1),[L,T]=a.useState(null),[$,p]=a.useState(!1),[F,b]=a.useState(null),[k,g]=a.useState(!1),[V,z]=a.useState([]),[P,n]=a.useState(!1),[G,f]=a.useState(!1),[h,H]=a.useState(""),J=e=>{u.get(`/admin/product/${e.id}/edit`).then(o=>{T(o.data.data),M(!0)}).catch(o=>{var r,_;n(!1);const l=((_=(r=o.response)==null?void 0:r.data)==null?void 0:_.message)||"An error occurred.";i.fire("Error!",l,"error")})},K=()=>{T(null),M(!1)},Q=e=>{b(e),p(!0)},U=()=>{b(null),p(!1)},W=()=>{n(!0),u.delete(`/admin/product/${F}`).then(()=>{n(!1),p(!1),i.fire({icon:"success",title:t("global.swalDeleted","Deleted!"),text:t("product.pageTitle")+" "+t("global.deletedMessage")}),d(e=>!e)}).catch(e=>{n(!1);const o=O(e,t,c.language);i.fire(t("global.swalError","Error!"),o,"error")})},X=e=>{z(e),g(!0)},Y=()=>{n(!0),u.post(route("admin.product.bulk-delete"),{ids:V}).then(()=>{n(!1),g(!1),i.fire({icon:"success",title:t("global.swalDeleted","Deleted!"),text:t("product.pageTitle")+" "+t("global.deletedMessage")}),d(e=>!e)}).catch(e=>{n(!1);const o=O(e,t,c.language);i.fire("Error!",o,"error")})},Z=e=>{H(e),e!==h&&S(1)},q=()=>{f(!0),u.get("/admin/product/data",{params:{page:m,search:h}}).then(e=>{v(e.data.data),y(e.data.last_page),f(!1)}).catch(e=>{f(!1)})};a.useEffect(()=>{q()},[m,h,N]);const w=[{header:t("global.name"),accessor:"name"},{header:t("global.image"),accessor:e=>e.image||e.image_2||e.image_3?s.jsx("div",{className:"flex flex-col gap-2",children:[e.image,e.image_2,e.image_3].map((o,l)=>s.jsx(ae,{src:`/${o}`,alt:e.name,className:"h-12 w-12 object-cover rounded"},l))}):s.jsx("span",{className:"text-gray-400 italic",children:"-"})},{header:t("global.description"),accessor:e=>{const o=c.language==="en"?e.description_en:e.description_id;return s.jsx(x,{text:o,limit:5})}},{header:t("global.price"),accessor:e=>`Rp. ${e.price}`},{header:"Rating",accessor:e=>s.jsx(re,{rating:e.rating,userReviewCount:e.rating_count,detailView:!0})},{header:t("global.favorite"),accessor:e=>s.jsx(ie,{count:e.favorites_count}),className:"text-center"},{header:"stand_id",accessor:"stand_id",className:"text-center"},{header:t("category.pageTitle"),accessor:e=>{if(e.categories&&e.categories.length>0){const l=e.categories.map(r=>c.language==="en"?r.name_en:r.name_id).join(", ");return s.jsx(x,{text:l,limit:5})}return"-"},className:"text-center"},{header:t("ingredient.pageTitle"),accessor:e=>{if(e.ingredients&&e.ingredients.length>0){const l=e.ingredients.map(r=>c.language==="en"?r.name_en:r.name_id).join(", ");return s.jsx(x,{text:l,limit:5})}return"-"}},{header:"Status",accessor:e=>s.jsx(ne,{value:e.is_active}),className:"text-center"},{header:t("global.actions"),accessor:e=>s.jsx(le,{onEdit:()=>J(e),onDelete:()=>Q(e.id),isPermanentDelete:!e.is_active})}];return s.jsxs(ee,{children:[s.jsx(te,{columns:w,data:I,currentPage:m,totalPages:R,onSearch:Z,onPageChange:e=>S(e),onAdd:()=>D(!0),addType:"modal",addButtonText:t("product.pageTitle","Create Product"),AddModalContent:C,selectable:!0,onDeleteSelected:X,isProcessing:G}),s.jsx(C,{isOpen:j,onClose:B,setRefetch:d}),s.jsx(se,{isOpen:A,onClose:K,product:L,setRefetch:d}),s.jsx(E,{isOpen:$,onClose:U,onDelete:W,title:t("product.deleteTitle","Delete Product"),description:t("product.deleteDescription","Are you sure you want to delete this product? This action cannot be undone."),deleteButtonText:t("product.deleteButton","Delete Product"),isProcessing:P}),s.jsx(E,{isOpen:k,onClose:()=>g(!1),onDelete:Y,title:t("product.deleteSelectedTitle","Delete Selected Products"),description:t("product.deleteSelectedDescription","Are you sure you want to delete the selected products? This action cannot be undone."),deleteButtonText:t("product.deleteSelectedButton","Delete Selected"),isProcessing:P})]})};export{Ge as default};
