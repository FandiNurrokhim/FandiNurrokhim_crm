import{r as a,j as s,a as i}from"./app-DdujxetC.js";import{S as n}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{F as q,C as ee,T as te,a as N}from"./Card-DDsZeuq4.js";import{D as se}from"./DangerButton-CR7n5plE.js";import E from"./CreateModal-CFf4TBnA.js";import ae from"./EditModal-DTHrqRNg.js";import{A as oe}from"./Avatar-D3FqKlbf.js";import{g as T}from"./getErrorMessage-BiY5rOY1.js";import{S as re,C as le}from"./lib-B8fTtbY3.js";import{u as ne}from"./useTranslation-8BayAZb4.js";import{F as ce}from"./TrashIcon-DHaJCAft.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";/* empty css              */import"./react-select.esm-DoIX5jeO.js";import"./toConsumableArray-Bj8NDksB.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./UploadInputWithView-BeMryQyC.js";import"./XMarkIcon-Duw6_-fQ.js";import"./imageHelper-19DfnHcd.js";const de=t=>t?`https://flagcdn.com/24x18/${t.toLowerCase()}.png`:"",ie=t=>{if(!t)return"-";const o=le.getCountryByCode(t);return o?o.name:t},ue=(t,o)=>{if(!t||!o)return"-";const c=re.getStateByCodeAndCountry(o,t);return c?c.name:o},Le=()=>{const{t,i18n:o}=ne(),[c,O]=a.useState([]),[w,d]=a.useState(!1),[u,h]=a.useState(1),[U,v]=a.useState(1),[x,b]=a.useState(!1),I=()=>b(!x),[P,S]=a.useState(!1),[A,y]=a.useState(null),[k,m]=a.useState(!1),[B,j]=a.useState(null),[F,p]=a.useState(!1),[R,$]=a.useState([]),[D,r]=a.useState(!1),[L,f]=a.useState(!1),[g,_]=a.useState(""),H=e=>{i.get(`/admin/user/${e.id}`).then(l=>{y(l.data.user),S(!0)}).catch(l=>{var M,C;r(!1);const Z=((C=(M=l.response)==null?void 0:M.data)==null?void 0:C.message)||"An error occurred.";n.fire("Error!",Z,"error")})},z=()=>{y(null),S(!1)},G=e=>{j(e),m(!0)},J=()=>{j(null),m(!1)},K=()=>{r(!0),i.delete(`/admin/user/${B}`).then(()=>{r(!1),m(!1),n.fire(t("global.swalDeleted","Deleted!"),t("user.deletedMessage","User has been deleted."),"success"),d(e=>!e)}).catch(e=>{r(!1);const l=T(e,t,o.language);n.fire(t("global.swalError","Error!"),l,"error")})},Q=e=>{$(e),p(!0)},V=()=>{r(!0),i.post(route("admin.user.bulk-delete"),{ids:R}).then(()=>{r(!1),p(!1),n.fire("Deleted!","Selected users have been deleted.","success"),d(e=>!e)}).catch(e=>{r(!1);const l=T(e,t,o.language);n.fire("Error!",l,"error")})},W=e=>{_(e),e!==g&&h(1)},X=()=>{f(!0),i.get("/admin/user/data",{params:{page:u,search:g}}).then(e=>{O(e.data.data),v(e.data.last_page),f(!1)}).catch(e=>{f(!1)})};a.useEffect(()=>{X()},[u,g,w]);const Y=[{header:t("global.name"),accessor:e=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(oe,{imagePath:e.photo_profile,name:e.name,className:"inline-block relative object-cover object-center !rounded-full w-12 h-12"}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-slate-800 font-semibold",children:e.name||"-"}),s.jsx("p",{className:"inline-block rounded bg-indigo-100 text-indigo-700 px-2 py-1 text-xs font-semibold",children:e.roles&&e.roles.length>0?e.roles[0].name:"-"})]})]})},{header:t("global.email"),accessor:e=>e.email||"-",className:"font-semibold"},{header:t("global.phone"),accessor:e=>e.phone||"-"},{header:t("global.country"),accessor:e=>s.jsxs("span",{className:"flex items-center gap-2",children:[e.country&&s.jsx("img",{src:de(e.country),alt:e.country,className:"inline-block w-5 h-4 object-cover rounded-sm"}),ie(e.country)]})},{header:t("global.state"),accessor:e=>ue(e.country,e.state),className:"font-semibold text-center"},{header:t("global.city"),accessor:e=>e.city||"-",className:"font-semibold text-center"},{header:t("global.address"),accessor:e=>e.address||"-"},{header:t("global.actions"),accessor:e=>s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsxs("button",{onClick:()=>H(e),className:"inline-flex items-center rounded-md border border-transparent bg-yellow-400 px-2 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 active:bg-yellow-700",children:[s.jsx(q,{className:"w-5 h-5 me-2 rounded-full bg-yellow-500 p-1 text-white"})," ",s.jsx("span",{children:t("global.edit","Edit")})]}),s.jsxs(se,{onClick:()=>G(e.id),children:[s.jsx(ce,{className:"w-5 h-5 me-2 rounded-full bg-red-400 p-1 text-white"})," ",s.jsx("span",{children:t("global.delete","Hapus")})]})]})}];return s.jsxs(ee,{children:[s.jsx(te,{columns:Y,data:c,currentPage:u,totalPages:U,onSearch:W,onPageChange:e=>h(e),onAdd:()=>b(!0),addType:"modal",addButtonText:t("global.user","User"),AddModalContent:E,selectable:!0,onDeleteSelected:Q,isProcessing:L}),s.jsx(E,{isOpen:x,onClose:I,setRefetch:d}),s.jsx(ae,{isOpen:P,onClose:z,user:A,setRefetch:d}),s.jsx(N,{isOpen:k,onClose:J,onDelete:K,title:t("user.deleteTitle","Delete User"),description:t("user.deleteDescription","Are you sure you want to delete this user? This action cannot be undone."),deleteButtonText:t("user.deleteTitle","Delete User"),isProcessing:D}),s.jsx(N,{isOpen:F,onClose:()=>p(!1),onDelete:V,title:t("user.deleteSelectedTitle","Delete Selected Users"),description:t("user.deleteSelectedDescription","Are you sure you want to delete the selected users? This action cannot be undone."),deleteButtonText:t("user.deleteSelectedButton","Delete Selected"),isProcessing:D})]})};export{Le as default};
