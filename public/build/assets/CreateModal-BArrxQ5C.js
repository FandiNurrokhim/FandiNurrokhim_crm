import{r as m,v as k,j as a}from"./app-DdujxetC.js";import{S as p}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{S as f}from"./react-select.esm-DoIX5jeO.js";import{r as C}from"./index-Rb7ez85R.js";import{M as z}from"./Modal-C4vY61V8.js";import{I as o}from"./InputLabel-BzWnVHML.js";import{T as x}from"./TextInput-BmMh6PqU.js";import{I as l}from"./InputError-Cg3yzoP4.js";import{A as B}from"./ActiveToogle-B-WZcVjZ.js";import{U as h}from"./UploadInputWithView-BeMryQyC.js";import{a as D}from"./getErrorMessage-BiY5rOY1.js";import{u as A}from"./useTranslation-8BayAZb4.js";import"./toConsumableArray-Bj8NDksB.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./PrimaryButton-DWDteuQq.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./XMarkIcon-Duw6_-fQ.js";const te=({isOpen:c,onClose:u,setRefetch:q})=>{const{t:r,i18n:g}=A(),[N,S]=m.useState([]),[w,E]=m.useState([]),[$,I]=m.useState([]),{data:i,setData:s,post:M,processing:T,errors:t,reset:_}=k({name:"",price:0,description_id:"",description_en:"",portion_info:"",stand_id:"",categories:[],ingredients:[],is_active:!1,image:"",image_2:"",image_3:"",message:""});m.useEffect(()=>{c&&fetch("/admin/product/select-data").then(e=>e.json()).then(e=>{S(e.data.stands||[]),E(e.data.categories||[]),I(e.data.ingredients||[])}).catch(()=>{p.fire("Error!","Gagal mengambil data stand","error")})},[c]);const d=e=>{s(e.target.name,e.target.value)},y=e=>{e.preventDefault(),M("/admin/product",{onSuccess:()=>{_(),u(),q(n=>!n),p.fire({icon:"success",title:r("global.swalSuccess"),text:r("product.pageTitle")+" "+r("global.createdMessage")})},onError:n=>{const F=D(n.message,g.language);p.fire("Error!",F,"error")}})},v=N.map(e=>({value:e.id,label:e.name})),j=w.map(e=>({value:e.id,label:g.language==="id"?e.name_id:e.name_en})),b=$.map(e=>({value:e.id,label:g.language==="id"?e.name_id:e.name_en}));return a.jsxs(z,{show:c,onClose:u,title:r("product.pageTitle"),type:"add",maxWidth:"2xl",onCancel:()=>{u(),_()},processing:T,onSubmit:y,children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"w-1/2",children:[a.jsx(o,{htmlFor:"name",value:`${r("global.name")}`,required:!0}),a.jsx(x,{id:"name",name:"name",value:i.name,onChange:d,className:"mt-1 block w-full",required:!0,autoComplete:"off",placeholder:`${r("global.name")} ${r("product.pageTitle")}`}),a.jsx(l,{message:t.name,className:"mt-2"})]}),a.jsxs("div",{className:"w-1/2",children:[a.jsx(o,{htmlFor:"price",value:`${r("global.price")}`,required:!0}),a.jsx(x,{id:"price",name:"price",value:i.price,type:"number",onChange:d,className:"mt-1 block w-full",required:!0,autoComplete:"off",placeholder:`${r("global.price")} ${r("product.pageTitle")}`}),a.jsx(l,{message:t.price,className:"mt-2"})]})]}),a.jsxs("div",{className:"w-full",children:[a.jsx(o,{htmlFor:"portion_info",value:`${r("product.portionInfo")}`,required:!0}),a.jsx(x,{id:"portion_info",name:"portion_info",value:i.portion_info,onChange:d,className:"mt-1 block w-full",required:!0,autoComplete:"off",placeholder:"1 porsi, 1 liter, 500 gram, dll."}),a.jsx(l,{message:t.portion_info,className:"mt-2"})]}),a.jsx(h,{id:"image",name:"image",label:r("global.image"),accept:".jpg,.jpeg,.png",maxSizeMB:.2,onChange:e=>s("image",e.target.files[0]),value:i.image,error:t.image,required:!0}),a.jsx(h,{id:"image_2",name:"image_2",label:r("global.image")+"2",accept:".jpg,.jpeg,.png",maxSizeMB:.2,onChange:e=>s("image_2",e.target.files[0]),value:i.image_2,error:t.image_2,required:!0}),a.jsx(h,{id:"image_3",name:"image_3",label:r("global.image")+"3",accept:".jpg,.jpeg,.png",maxSizeMB:.2,onChange:e=>s("image_3",e.target.files[0]),value:i.image_3,error:t.image_3,required:!0}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"stand_id",value:"Stand",required:!0}),a.jsx(f,{options:v,id:"stand_id",name:"stand_id",value:v.find(e=>e.value===i.stand_id)||null,onChange:e=>{s("stand_id",e?e.value:"")},placeholder:r("product.selectStand"),isClearable:!0,required:!0})]}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"category_id",value:`${r("category.pageTitle")} (EN)`,required:!0}),a.jsx(f,{options:j,id:"category_id",name:"category_id",isMulti:!0,value:j.filter(e=>i.categories.includes(e.value)),onChange:e=>{s("categories",e?e.map(n=>n.value):[])},placeholder:r("product.selectCategory"),isClearable:!0,required:!0})]}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"ingredient_id",value:`${r("ingredient.pageTitle")} (EN)`,required:!0}),a.jsx(f,{options:b,id:"ingredient_id",name:"ingredient_id",isMulti:!0,value:b.filter(e=>i.ingredients.includes(e.value)),onChange:e=>{s("ingredients",e?e.map(n=>n.value):[])},placeholder:r("product.selectIngredients"),isClearable:!0,required:!0})]}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"description_id",value:`${r("global.description")} (ID)`,required:!0}),a.jsx(C.Textarea,{name:"description_id",id:"description_id",value:i.description_id,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:d,placeholder:r("global.description")+" "+r("global.inId"),required:!0}),a.jsx(l,{message:t.description_id,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"description_en",value:`${r("global.description")} (EN)`,required:!0}),a.jsx(C.Textarea,{name:"description_en",id:"description_en",value:i.description_en,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:d,placeholder:r("global.description")+" "+r("global.inEn"),required:!0}),a.jsx(l,{message:t.description_en,className:"mt-2"})]}),a.jsx(B,{value:i.is_active,onChange:e=>s("is_active",e),required:!0}),a.jsx(l,{message:t.is_active,className:"mt-2"})]})};export{te as default};
