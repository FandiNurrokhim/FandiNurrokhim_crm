import{r as S,j as e,v as G,q as E,m as J,a as z}from"./app-DdujxetC.js";import{A as $,F as W,H as K}from"./HomeLayout-DOTPFD1x.js";import{r as Q}from"./HomeCarousel-DaNJ6o_C.js";import{g as B}from"./imageHelper-19DfnHcd.js";import{I as X}from"./index.es-BVb1l-Mq.js";import{S as Y}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{r as q}from"./index-Rb7ez85R.js";import{I as D}from"./InputError-Cg3yzoP4.js";import{a as V}from"./getErrorMessage-BiY5rOY1.js";import{s as Z}from"./Toast-BkAQvP14.js";import{u as A}from"./useTranslation-8BayAZb4.js";import{L as ee,y as O}from"./index-CZ0tZ6fy.js";import{z as te,F as P}from"./transition-BZAsKsJL.js";import{L as re,q as se}from"./dialog-Cmhm8y39.js";import{F as ae}from"./HeartIcon-BIzo_fDE.js";import{R as ne}from"./Rating-XxgJT9dk.js";import{L as oe}from"./LimitedText-Dj5mDYrI.js";import"./ApplicationLogo-DDW-aaz4.js";import"./Logo-Dq8nsJV3.js";import"./LoginGoogleButton-DzpqdfCm.js";import"./TextInput-BmMh6PqU.js";import"./Checkbox-BbuAp7Rg.js";import"./XMarkIcon-Duw6_-fQ.js";import"./LanguageDropdown-CZVTQBmi.js";import"./ResponsiveNavLink-DDPMZpeH.js";import"./Avatar-D3FqKlbf.js";import"./ChatBubbleLeftRightIcon-BSQqBWTT.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";if(!I)var I={map:function(r,s){var m={};return s?r.map(function(o,f){return m.index=f,s.call(m,o)}):r.slice()},naturalOrder:function(r,s){return r<s?-1:r>s?1:0},sum:function(r,s){var m={};return r.reduce(s?function(o,f,v){return m.index=v,o+s.call(m,f)}:function(o,f){return o+f},0)},max:function(r,s){return Math.max.apply(null,s?I.map(r,s):r)}};var ie=function(){var r=5,s=8-r,m=1e3;function o(a,t,d){return(a<<2*r)+(t<<r)+d}function f(a){var t=[],d=!1;function u(){t.sort(a),d=!0}return{push:function(l){t.push(l),d=!1},peek:function(l){return d||u(),l===void 0&&(l=t.length-1),t[l]},pop:function(){return d||u(),t.pop()},size:function(){return t.length},map:function(l){return t.map(l)},debug:function(){return d||u(),t}}}function v(a,t,d,u,l,n,h){this.r1=a,this.r2=t,this.g1=d,this.g2=u,this.b1=l,this.b2=n,this.histo=h}function j(){this.vboxes=new f(function(a,t){return I.naturalOrder(a.vbox.count()*a.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function b(a,t){if(t.count()){var d=t.r2-t.r1+1,u=t.g2-t.g1+1,l=I.max([d,u,t.b2-t.b1+1]);if(t.count()==1)return[t.copy()];var n,h,x,c,g=0,p=[],N=[];if(l==d)for(n=t.r1;n<=t.r2;n++){for(c=0,h=t.g1;h<=t.g2;h++)for(x=t.b1;x<=t.b2;x++)c+=a[o(n,h,x)]||0;p[n]=g+=c}else if(l==u)for(n=t.g1;n<=t.g2;n++){for(c=0,h=t.r1;h<=t.r2;h++)for(x=t.b1;x<=t.b2;x++)c+=a[o(h,n,x)]||0;p[n]=g+=c}else for(n=t.b1;n<=t.b2;n++){for(c=0,h=t.r1;h<=t.r2;h++)for(x=t.g1;x<=t.g2;x++)c+=a[o(h,x,n)]||0;p[n]=g+=c}return p.forEach(function(_,k){N[k]=g-_}),function(_){var k,M,F,w,y,C=_+"1",R=_+"2",L=0;for(n=t[C];n<=t[R];n++)if(p[n]>g/2){for(F=t.copy(),w=t.copy(),y=(k=n-t[C])<=(M=t[R]-n)?Math.min(t[R]-1,~~(n+M/2)):Math.max(t[C],~~(n-1-k/2));!p[y];)y++;for(L=N[y];!L&&p[y-1];)L=N[--y];return F[R]=y,w[C]=F[R]+1,[F,w]}}(l==d?"r":l==u?"g":"b")}}return v.prototype={volume:function(a){return this._volume&&!a||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(a){var t=this.histo;if(!this._count_set||a){var d,u,l,n=0;for(d=this.r1;d<=this.r2;d++)for(u=this.g1;u<=this.g2;u++)for(l=this.b1;l<=this.b2;l++)n+=t[o(d,u,l)]||0;this._count=n,this._count_set=!0}return this._count},copy:function(){return new v(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(a){var t=this.histo;if(!this._avg||a){var d,u,l,n,h=0,x=1<<8-r,c=0,g=0,p=0;for(u=this.r1;u<=this.r2;u++)for(l=this.g1;l<=this.g2;l++)for(n=this.b1;n<=this.b2;n++)h+=d=t[o(u,l,n)]||0,c+=d*(u+.5)*x,g+=d*(l+.5)*x,p+=d*(n+.5)*x;this._avg=h?[~~(c/h),~~(g/h),~~(p/h)]:[~~(x*(this.r1+this.r2+1)/2),~~(x*(this.g1+this.g2+1)/2),~~(x*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(a){var t=a[0]>>s;return gval=a[1]>>s,bval=a[2]>>s,t>=this.r1&&t<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},j.prototype={push:function(a){this.vboxes.push({vbox:a,color:a.avg()})},palette:function(){return this.vboxes.map(function(a){return a.color})},size:function(){return this.vboxes.size()},map:function(a){for(var t=this.vboxes,d=0;d<t.size();d++)if(t.peek(d).vbox.contains(a))return t.peek(d).color;return this.nearest(a)},nearest:function(a){for(var t,d,u,l=this.vboxes,n=0;n<l.size();n++)((d=Math.sqrt(Math.pow(a[0]-l.peek(n).color[0],2)+Math.pow(a[1]-l.peek(n).color[1],2)+Math.pow(a[2]-l.peek(n).color[2],2)))<t||t===void 0)&&(t=d,u=l.peek(n).color);return u},forcebw:function(){var a=this.vboxes;a.sort(function(l,n){return I.naturalOrder(I.sum(l.color),I.sum(n.color))});var t=a[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(a[0].color=[0,0,0]);var d=a.length-1,u=a[d].color;u[0]>251&&u[1]>251&&u[2]>251&&(a[d].color=[255,255,255])}},{quantize:function(a,t){if(!a.length||t<2||t>256)return!1;var d=function(c){var g,p=new Array(1<<3*r);return c.forEach(function(N){g=o(N[0]>>s,N[1]>>s,N[2]>>s),p[g]=(p[g]||0)+1}),p}(a);d.forEach(function(){});var u=function(c,g){var p,N,_,k=1e6,M=0,F=1e6,w=0,y=1e6,C=0;return c.forEach(function(R){(p=R[0]>>s)<k?k=p:p>M&&(M=p),(N=R[1]>>s)<F?F=N:N>w&&(w=N),(_=R[2]>>s)<y?y=_:_>C&&(C=_)}),new v(k,M,F,w,y,C,g)}(a,d),l=new f(function(c,g){return I.naturalOrder(c.count(),g.count())});function n(c,g){for(var p,N=c.size(),_=0;_<m;){if(N>=g||_++>m)return;if((p=c.pop()).count()){var k=b(d,p),M=k[0],F=k[1];if(!M)return;c.push(M),F&&(c.push(F),N++)}else c.push(p),_++}}l.push(u),n(l,.75*t);for(var h=new f(function(c,g){return I.naturalOrder(c.count()*c.volume(),g.count()*g.volume())});l.size();)h.push(l.pop());n(h,t);for(var x=new j;h.size();)x.push(h.pop());return x}}}().quantize,H=function(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=r.naturalWidth,this.height=this.canvas.height=r.naturalHeight,this.context.drawImage(r,0,0,this.width,this.height)};H.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var T=function(){};T.prototype.getColor=function(r,s){return s===void 0&&(s=10),this.getPalette(r,5,s)[0]},T.prototype.getPalette=function(r,s,m){var o=function(b){var a=b.colorCount,t=b.quality;if(a!==void 0&&Number.isInteger(a)){if(a===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");a=Math.max(a,2),a=Math.min(a,20)}else a=10;return(t===void 0||!Number.isInteger(t)||t<1)&&(t=10),{colorCount:a,quality:t}}({colorCount:s,quality:m}),f=new H(r),v=function(b,a,t){for(var d=b,u=[],l=0,n=void 0,h=void 0,x=void 0,c=void 0,g=void 0;l<a;l+=t)h=d[0+(n=4*l)],x=d[n+1],c=d[n+2],((g=d[n+3])===void 0||g>=125)&&(h>250&&x>250&&c>250||u.push([h,x,c]));return u}(f.getImageData().data,f.width*f.height,o.quality),j=ie(v,o.colorCount);return j?j.palette():null},T.prototype.getColorFromUrl=function(r,s,m){var o=this,f=document.createElement("img");f.addEventListener("load",function(){var v=o.getPalette(f,5,m);s(v[0],r)}),f.src=r},T.prototype.getImageData=function(r,s){var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=function(){if(this.status==200){var o=new Uint8Array(this.response);i=o.length;for(var f=new Array(i),v=0;v<o.length;v++)f[v]=String.fromCharCode(o[v]);var j=f.join(""),b=window.btoa(j);s("data:image/png;base64,"+b)}},m.send()},T.prototype.getColorAsync=function(r,s,m){var o=this;this.getImageData(r,function(f){var v=document.createElement("img");v.addEventListener("load",function(){var j=o.getPalette(v,5,m);s(j[0],this)}),v.src=f})};function le({image1:r,image2:s,image3:m,alt:o="Fruit Image"}){const f=[r,s,m].filter(Boolean),v=S.useRef([]),[j,b]=S.useState("linear-gradient(rgb(209, 220, 176), rgb(199, 211, 163))"),[a,t]=Q.useKeenSlider({loop:!0,slideChanged(u){u.track&&u.track.details&&d(u.track.details.rel)},created(u){u.track&&u.track.details&&d(u.track.details.rel)}});S.useEffect(()=>{if(!t.current)return;const u=setInterval(()=>{t.current.next()},3e3);return()=>clearInterval(u)},[t]);const d=u=>{const l=v.current[u];if(l)if(l.complete)try{let h=new T().getPalette(l,6);const x=g=>g[0]*.299+g[1]*.587+g[2]*.114;h=h.filter(g=>x(g)>180),h.sort((g,p)=>x(p)-x(g));const c=h[0];b(c?`linear-gradient(rgb(${c.join(",")}), rgb(245,245,245))`:"linear-gradient(rgb(209, 220, 176), rgb(245,245,245))")}catch{b("linear-gradient(rgb(209, 220, 176), rgb(245,245,245))")}else l.onload=()=>d(u)};return S.useEffect(()=>{b("linear-gradient(rgb(209, 220, 176), rgb(199, 211, 163))")},[r,s,m]),e.jsx("div",{className:"flex max-w-7xl mx-auto h-[60vh] items-center justify-center gap-8 transition-colors duration-500",style:{background:j},children:e.jsx("div",{ref:a,className:"keen-slider",children:f.map((u,l)=>e.jsx("div",{className:"keen-slider__slide px-5 aspect-[4/3] flex flex-col items-center justify-center relative",children:e.jsx("img",{ref:n=>v.current[l]=n,src:B(u),alt:o,className:"object-cover rounded-2xl w-[350px] h-[260px] transition-transform duration-300 hover:scale-105"})},l))})})}const U=({review:r})=>e.jsxs("article",{className:"flex space-x-4",children:[r.user.photo_profile?e.jsx("img",{alt:r.user.name,className:"w-12 h-12 rounded-full object-cover",height:"48",src:r.user.photo_profile,width:"48"}):e.jsx("div",{className:"relative inline-flex items-center justify-center w-12 h-12 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600",children:e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:r.user.name.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:r.user.name}),e.jsx("div",{className:"flex text-yellow-400 text-base mb-2",children:Array.from({length:5}).map((s,m)=>e.jsx("i",{className:m<Math.round(r.rating)?"fas fa-star":"far fa-star text-gray-300"},m))}),e.jsx("p",{className:"italic text-sm text-gray-700 max-w-xl",children:r.comment})]})]});function ce(){return e.jsx(e.Fragment,{children:Array.from({length:7}).map((r,s)=>e.jsxs("article",{className:"flex space-x-4 animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200"}),e.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((m,o)=>e.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded"},o))}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-56"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-40"})]})]},s))})}function de({reviews:r,isLoading:s}){return e.jsx("section",{className:"w-full space-y-10 max-h-[420px] overflow-y-auto pr-2",children:s?e.jsx(ce,{}):r&&r.length>0?r.map((m,o)=>e.jsx(U,{review:m},o)):e.jsx("div",{className:"text-gray-500 text-sm",children:"Belum ada review."})})}const ue=({isOpen:r,onClose:s,productId:m})=>{const{t:o,i18n:f}=A(),{data:v,setData:j,post:b,processing:a,errors:t,reset:d}=G({product_id:m,rating:5,comment:""}),u=n=>{j(n.target.name,n.target.value)},l=n=>{n.preventDefault(),b("/review",{onSuccess:()=>{d(),s(),Z(o("global.reviewSuccessMessage"),"success")},onError:h=>{const x=f.language,c=V(h.message,x);Y.fire({icon:"error",title:o("global.swalError"),text:c})}})};return e.jsxs(e.Fragment,{children:[e.jsx(te,{show:r,leave:"duration-200",children:e.jsxs(re,{as:"div",id:"modal",className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6",onClose:s,children:[e.jsx(P,{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"absolute inset-0 bg-black/80"})}),e.jsx(P,{enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx(se,{className:"w-full max-w-sm transform overflow-hidden rounded-xl  text-white p-6 text-center transition-all",children:e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:o("global.reviewTitle","How was your experience?")}),e.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4,5].map(n=>e.jsx("button",{type:"button",onClick:()=>j("rating",n),className:"text-yellow-400 text-2xl focus:outline-none",children:e.jsx("i",{className:v.rating>=n?"fas fa-star":"far fa-star"})},n))}),e.jsx(D,{message:t.rating,className:"text-red-400 text-sm mt-1"}),e.jsxs("div",{className:"relative",children:[e.jsx(q.Textarea,{name:"comment",maxLength:200,value:v.comment,onChange:u,placeholder:o("global.reviewPlaceholder","Write your review here..."),className:"w-full bg-white rounded-xl p-3 text-sm text-black resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:3}),e.jsxs("div",{className:"absolute bottom-2 right-3 text-xs text-gray-300",children:[v.comment.length,"/200"]}),e.jsx(D,{message:t.review,className:"text-red-400 text-sm mt-1 text-left"})]}),e.jsxs("button",{type:"submit",className:"w-full px-4 py-2 border bg-[#D9B36A] hover:bg-[#c2a061] align-center justify-center border-none gap-2 rounded-lg text-slate-700 dark:text-white hover:border-slate-400 dark:hover:border-slate-500 hover:text-slate-900 dark:hover:text-black hover:shadow transition duration-150 flex items-center",disabled:a,children:[a&&e.jsx("span",{className:"mr-2",children:e.jsx(q.Spinner,{className:"h-4 w-4 animate-spin"})}),o(a?"global.processing":"global.save")]})]})})})]})}),e.jsx(ee,{})]})};function me(){return e.jsxs("section",{className:"md:w-1/3 animate-pulse",children:[e.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2 mb-3"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-300 rounded"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]}),e.jsx("div",{className:"space-y-3 mb-6",children:[...Array(5)].map((r,s)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"},s))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-full"})]})]})}function he({isLoading:r,summary:s,userReview:m}){const{t:o}=A(),f=E().props.auth.user,v=E().props.product.id,[j,b]=S.useState(!1),[a,t]=S.useState("login"),[d,u]=S.useState(!1),l=(s==null?void 0:s.total)||0,n=(s==null?void 0:s.average)||0,h=s!=null&&s.breakdown&&s.breakdown.length===5?s.breakdown:[5,4,3,2,1].map(c=>({star:c,percent:0})),x=()=>{!f||!f.id?(t("login"),b(!0)):u(!0)};return r?e.jsx(me,{}):e.jsxs("section",{className:"w-full",children:[e.jsx("h2",{className:"font-semibold text-lg mb-2",children:o("home.reviewSummary")}),e.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[e.jsx("div",{className:"flex text-yellow-400 text-base",children:e.jsx("div",{className:"flex text-base gap-1",children:[...Array(5)].map((c,g)=>e.jsx("i",{className:s&&l>0&&g<Math.round(n)?"fas fa-star text-yellow-400":"far fa-star text-gray-300"},g))})}),e.jsxs("span",{className:"text-xs text-gray-700",children:[o("home.basedOn")," ",l," ",o("home.reviews")]})]}),e.jsx("div",{className:"space-y-2 mb-6 mt-3",children:h.map(c=>e.jsxs("div",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{className:"w-5",children:c.star}),e.jsx("i",{className:`fas fa-star w-4 ${s&&l>0?"text-yellow-400":"text-gray-300"}`}),e.jsx("div",{className:"h-3 rounded-full bg-gray-200 mx-3 flex-1",children:e.jsx("div",{className:"h-3 rounded-full bg-yellow-400",style:{width:`${c.percent}%`}})}),e.jsxs("span",{className:"w-8 text-right",children:[c.percent,"%"]})]},c.star))}),m?e.jsx(U,{review:m}):e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1 text-sm",children:o("home.shareYourThought")}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:o("home.shareExperience")}),e.jsx("button",{className:"w-full border border-gray-300 rounded-md py-2 text-xs font-semibold text-gray-900 hover:bg-gray-50",type:"button",onClick:x,children:o("home.writeReview")}),e.jsx($,{isOpen:j,onClose:()=>b(!1),defaultMode:a})]}),e.jsx(ue,{isOpen:d,onClose:()=>u(!1),productId:v})]})}function fe({productId:r,initialReviews:s,summary:m,userReview:o}){const{t:f,i18n:v}=A(),[j,b]=S.useState(s.data),[a,t]=S.useState(2),[d,u]=S.useState(s.current_page<s.last_page),l=!1,n=async()=>{J.get(`/product/${r}`,{page:a},{preserveScroll:!0,preserveState:!0,only:["reviews"],onSuccess:h=>{const x=h.props.reviews.data;b(c=>[...c,...x]),t(c=>c+1),u(h.props.reviews.current_page<h.props.reviews.last_page)}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1 gap-20 mt-10",children:[e.jsx(he,{isLoading:l,summary:m,userReview:o}),!m||Object.keys(m).length===0?e.jsx("div",{className:"flex justify-center text-center items-center w-full",children:f("home.noReviews")}):e.jsx(X,{dataLength:j.length,next:n,hasMore:d,loader:e.jsx("p",{className:"text-center",children:"Loading..."}),scrollableTarget:null,children:e.jsx(de,{reviews:j,isLoading:l})})]})})}function ge({product:r,isFavorited:s=!1}){const{t:m}=A(),o=E().props.auth,[f,v]=S.useState(s),[j,b]=S.useState(!1),a=["Makanan","Minuman","Kudapan"],[t,d]=S.useState(!1),[u,l]=S.useState("login"),n=S.useRef(null),h=()=>{if(!o||!o.user){l("login"),d(!0);return}const c=!f;v(c),c?(O.success(m("global.addedToFavorites")),x(r)):O.info(m("global.removedFromFavorites")),n.current&&clearTimeout(n.current),b(!0),n.current=setTimeout(async()=>{try{z.post("/api/favorite",{food_id:r.id})}catch{v(p=>!p),O.error(m("global.errorAddFavorite"))}finally{b(!1)}},800)},x=c=>{if(!c)return;!localStorage.getItem("preferences")&&o&&o.user&&z.get("/api/user-preferences").then(w=>{localStorage.setItem("preferences",JSON.stringify(w.data))});const g=JSON.parse(localStorage.getItem("preferences"))||{categories:[],ingredients:[]};let p=g.categories.filter(w=>!c.categories.map(y=>y.name_id).includes(w));if(p=[...p,...c.categories.map(w=>w.name_id)],!p.some(w=>a.includes(w))){const w=a.find(y=>!p.includes(y));w&&p.push(w)}const _=p.slice(-5);let k=g.ingredients.filter(w=>!c.ingredients.map(y=>y.name_id).includes(w));k=[...k,...c.ingredients.map(w=>w.name_id)];const M=k.slice(-6),F={categories:_,ingredients:M};localStorage.setItem("preferences",JSON.stringify(F)),o&&o.user&&z.post("/api/update-preference",{preferences:F},{preserveScroll:!0,onSuccess:()=>{console.log("Preferences synced to server."),showToast("Preferences updated","success")},onError:()=>{console.error("Failed to update preferences."),showToast("Failed to update preferences","error")}})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{"aria-label":"Add to favorites",className:`flex-1 ml-4 ${f?"bg-[#E63946] text-white":"bg-white text-gray-800 border-2 hover:bg-slate-100"} font-semibold rounded-xl py-3 md:text-lg text-md flex items-center justify-center space-x-3 transition`,onClick:h,disabled:j,children:[f?e.jsx(ae,{className:"w-6 h-6"}):e.jsx(W,{className:"w-6 h-6"}),e.jsx("span",{children:m(f?"global.addedToFavorites":"global.addToFavorite")})]}),e.jsx($,{isOpen:t,onClose:()=>d(!1),defaultMode:u})]})}function xe({ingredients:r}){const{t:s,i18n:m}=A();return e.jsxs("div",{className:"tab-content",children:[e.jsx("h2",{className:"text-gray-900 font-semibold text-lg mb-4",children:s("home.ingredients")}),e.jsx("div",{id:"mini-carousel",className:"flex gap-4 py-2 overflow-x-auto scrollbar-hide cursor-grab select-none",children:r&&r.length>0?r.map((o,f)=>e.jsxs("div",{className:"flex-shrink-0 w-32 flex flex-col items-center bg-white rounded-xl shadow p-2",children:[e.jsx("img",{src:B(o.image),alt:m.language==="en"?o.name_en:o.name_id,className:"w-14 h-14 object-contain mb-2"}),e.jsx("p",{className:"text-xs font-medium text-gray-700 text-center",children:m.language==="en"?o.name_en:o.name_id})]},f)):e.jsx(e.Fragment,{children:[...Array(2)].map((o,f)=>e.jsxs("div",{className:"flex-shrink-0 w-32 flex flex-col items-center bg-gray-100 rounded-xl p-2 animate-pulse",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg bg-gray-300 mb-2"}),e.jsx("div",{className:"h-3 w-16 bg-gray-300 rounded"})]},f))})})]})}function pe({product:r}){const[s,m]=S.useState("detail"),o=E().props.reviews,f=E().props.summary,v=E().props.userReview,j=E().props.isFavorited,{t:b,i18n:a}=A(),t=a.language==="en"?r.description_en:r.description_id;return e.jsxs("div",{className:"bg-white max-w-7xl pb-20 mx-auto rounded-t-3xl shadow-lg px-7 pt-8",style:{marginTop:"-30px"},children:[e.jsxs("div",{className:"flex border-b border-gray-200 mb-6 relative bg-white",children:[e.jsx("button",{className:`py-2 px-4 text-sm font-semibold text-gray-700 border-b-2 border-transparent cursor-pointer focus:outline-none transition-colors duration-200 ${s==="detail"?"active-tab border-b-green-600 text-green-700":""}`,type:"button",onClick:()=>m("detail"),children:"Detail"}),e.jsx("button",{className:`py-2 px-4 text-sm font-semibold text-gray-700 border-b-2 border-transparent cursor-pointer focus:outline-none transition-colors duration-200 ${s==="bahan"?"active-tab border-b-green-600 text-green-700":""}`,type:"button",onClick:()=>m("bahan"),children:b("home.ingredients")})]}),s==="detail"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:r.name}),e.jsx(ne,{rating:r.average_rating,userReviewCount:r.rating_count}),e.jsx("p",{className:"text-green-600 font-semibold text-sm",children:r.portion_info})]}),e.jsx("div",{className:"flex items-center justify-between mt-7",children:e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["Rp. ",Number(r.price).toLocaleString("id-ID")]})}),e.jsx(oe,{text:t,limit:50}),e.jsx(fe,{productId:r.id,initialReviews:o,summary:f,userReview:v}),e.jsx("div",{className:"flex items-center justify-between mt-7",children:e.jsx(ge,{product:r,isFavorited:j})})]}),s==="bahan"&&e.jsx(xe,{ingredients:r.ingredients})]})}function We(){const r=E().props.product;return e.jsxs(K,{children:[e.jsx(le,{image1:r.image,image2:r.image_2,image3:r.image_3,alt:r.name}),e.jsx(pe,{product:r})]})}export{We as default};
