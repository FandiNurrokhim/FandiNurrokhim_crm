import{r as t,j as o,a as m}from"./app-DdujxetC.js";import{S as p}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{F as W,C as X,T as Y,a as Z}from"./Card-DDsZeuq4.js";import{D as q}from"./DangerButton-CR7n5plE.js";import j from"./CreateModal-CvG2ZpfJ.js";import ee from"./EditModal-C5vq7Sjt.js";import te from"./PermissionDetailModal-SWdwQUWT.js";import{g as se}from"./getErrorMessage-BiY5rOY1.js";import{u as oe}from"./useTranslation-8BayAZb4.js";import{F as ae}from"./TrashIcon-DHaJCAft.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./PermissionToggle-C1epi5W2.js";const Re=()=>{const{t:s,i18n:w}=oe(),[C,I]=t.useState([]),[O,r]=t.useState(!1),[n,u]=t.useState(1),[P,E]=t.useState(1),[f,g]=t.useState(!1),T=()=>g(!f),[y,h]=t.useState(!1),[R,x]=t.useState(null),[N,i]=t.useState(!1),[k,b]=t.useState(null),[le,re]=t.useState(!1),[ne,ie]=t.useState([]),[A,l]=t.useState(!1),[F,d]=t.useState(!1),[c,v]=t.useState(""),[B,S]=t.useState(!1),[$,L]=t.useState([]),_=e=>{m.get(`/admin/role/${e.id}/edit`).then(a=>{x(a.data.data),h(!0)}).catch(a=>{var M,D;l(!1);const V=((D=(M=a.response)==null?void 0:M.data)==null?void 0:D.message)||"An error occurred.";p.fire("Error!",V,"error")})},z=()=>{x(null),h(!1)},G=e=>{b(e),i(!0)},H=()=>{b(null),i(!1)},J=()=>{l(!0),m.delete(`/admin/role/${k}`).then(()=>{l(!1),i(!1),p.fire(s("global.swalDeleted","Deleted!"),s("role.deletedMessage","Role has been deleted."),"success"),r(e=>!e)}).catch(e=>{l(!1);const a=se(e,s,w.language);p.fire(s("global.swalError","Error!"),a,"error")})},K=e=>{v(e),e!==c&&u(1)},Q=()=>{d(!0),m.get("/admin/role/data",{params:{page:n,search:c}}).then(e=>{I(e.data.data),E(e.data.last_page),d(!1)}).catch(e=>{d(!1)})};t.useEffect(()=>{Q()},[n,c,O]);const U=[{header:s("global.name"),accessor:"name",className:"font-semibold"},{header:s("global.permission"),accessor:e=>o.jsx("button",{type:"button",className:"rounded-md bg-gray-700 text-white font-semibold p-1",onClick:()=>{L(e.permission||[]),S(!0)},children:s("global.permission")}),className:"text-center"},{header:s("global.actions"),accessor:e=>o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsxs("button",{onClick:()=>_(e),className:"inline-flex items-center rounded-md border border-transparent bg-yellow-400 px-2 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 active:bg-yellow-700",children:[o.jsx(W,{className:"w-5 h-5 me-2 rounded-full bg-yellow-500 p-1 text-white"})," ",o.jsx("span",{children:s("global.edit")})]}),o.jsxs(q,{onClick:()=>G(e.id),children:[o.jsx(ae,{className:"w-5 h-5 me-2 rounded-full bg-red-400 p-1 text-white"})," ",o.jsx("span",{children:s("global.delete")})]})]})}];return o.jsxs(X,{children:[o.jsx(Y,{columns:U,data:C,currentPage:n,totalPages:P,onSearch:K,onPageChange:e=>u(e),onAdd:()=>g(!0),addType:"modal",addButtonText:s("role.pageTitle","Role"),AddModalContent:j,selectable:!0,isProcessing:F,useSelectedDelete:!1}),o.jsx(j,{isOpen:f,onClose:T,setRefetch:r}),o.jsx(ee,{isOpen:y,onClose:z,role:R,setRefetch:r}),o.jsx(Z,{isOpen:N,onClose:H,onDelete:J,title:s("role.deleteTitle","Delete Role"),description:s("role.deleteDescription","Are you sure you want to delete this role? This action cannot be undone."),deleteButtonText:s("role.deleteTitle","Delete Role"),isProcessing:A}),o.jsx(te,{isOpen:B,permission:$,onClose:()=>S(!1)})]})};export{Re as default};
