import{v as q,q as D,r as h,j as e,m as E}from"./app-DdujxetC.js";import{S as C}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{C as k,S as T,a as V,P as U}from"./lib-B8fTtbY3.js";import{M as W}from"./Modal-C4vY61V8.js";import{I as m}from"./InputLabel-BzWnVHML.js";import{T as u}from"./TextInput-BmMh6PqU.js";import{I as n}from"./InputError-Cg3yzoP4.js";import{S as c}from"./react-select.esm-DoIX5jeO.js";import{U as $}from"./UploadInputWithView-BeMryQyC.js";import{a as z}from"./getErrorMessage-BiY5rOY1.js";import{u as A}from"./useTranslation-8BayAZb4.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./toConsumableArray-Bj8NDksB.js";import"./XMarkIcon-Duw6_-fQ.js";const re=({isOpen:N,onClose:p,user:t,setRefetch:S})=>{var f,y;if(!t)return null;const{t:s,i18n:I}=A(),{data:l,setData:o,processing:M,errors:r,reset:b}=q({name:t.name||"",email:t.email||"",password:"",phone:t.phone||"",address:t.address||"",country:t.country||"",state:t.state||"",city:t.city||"",role:((y=(f=t.roles)==null?void 0:f[0])==null?void 0:y.id)||"",image:null,message:""}),i=D().props.roles,x=h.useMemo(()=>k.getAllCountries().map(a=>({value:a.isoCode,label:a.name})),[]),j=h.useMemo(()=>l.country?T.getStatesOfCountry(l.country).map(a=>({value:a.isoCode,label:a.name})):[],[l.country]),v=h.useMemo(()=>l.country&&l.state?V.getCitiesOfState(l.country,l.state).map(a=>({value:a.name,label:a.name})):[],[l.country,l.state]),d=a=>{o(a.target.name,a.target.value)},F=a=>{a.preventDefault();const w={...l};(!l.password||l.password.trim()==="")&&delete w.password,E.post(`/admin/user/${t.id}`,{...w,_method:"put"},{onSuccess:()=>{b(),p(),S(g=>!g),C.fire({icon:"success",title:s("global.swalSuccess"),text:s("user.updatedMessage")})},onError:g=>{const P=z(g.message,I.language);C.fire("Error!",P,"error")}})};return e.jsxs(W,{show:N,onClose:p,title:s("global.user"),type:"edit",maxWidth:"5xl",onCancel:()=>{p(),b()},processing:M,onSubmit:F,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s("global.accountData")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",value:s("global.name"),required:!0}),e.jsx(u,{id:"name",name:"name",value:l.name,onChange:d,className:"mt-1 block w-full",autoComplete:"name",placeholder:s("global.name"),required:!0}),e.jsx(n,{message:r.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email",value:s("global.email"),required:!0}),e.jsx(u,{id:"email",name:"email",value:l.email,onChange:d,className:"mt-1 block w-full",autoComplete:"email",type:"email",placeholder:s("global.email"),required:!0}),e.jsx(n,{message:r.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password",value:s("global.password")}),e.jsx(u,{id:"password",name:"password",value:l.password,onChange:d,className:"mt-1 block w-full",autoComplete:"new-password",type:"password",placeholder:s("global.password")}),e.jsx(n,{message:r.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"role",value:s("role.pageTitle"),required:!0}),e.jsx(c,{options:(i==null?void 0:i.map(a=>({value:a.id,label:a.name})))||[],id:"role",name:"role",value:(i==null?void 0:i.map(a=>({value:a.id,label:a.name})).find(a=>a.label===l.role))||null,onChange:a=>o("role",a?a.label:""),placeholder:s("role.pageTitle"),isClearable:!0,menuPlacement:"auto",menuShouldScrollIntoView:!1,className:"mt-1 block w-full h-full",required:!0}),e.jsx(n,{message:r.role,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s("global.personalData")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"phone",value:s("global.phone")}),e.jsx(U,{country:"id",value:l.phone,onChange:a=>o("phone",a),inputClass:"!rounded-md !border-gray-300 !shadow-sm focus:!border-indigo-500 focus:!ring-indigo-500 !w-full !pl-12 !pr-3 py-2",buttonClass:"!bg-white !border-r !border-gray-300 !rounded-l-md",containerClass:"!w-full !mt-1"}),e.jsx(n,{message:r.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"address",value:s("global.address")}),e.jsx(u,{id:"address",name:"address",value:l.address,onChange:d,className:"mt-1 block w-full",autoComplete:"address",placeholder:s("global.address")}),e.jsx(n,{message:r.address,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"country",value:s("global.country")}),e.jsx(c,{options:x,id:"country",name:"country",value:x.find(a=>a.value===l.country)||null,onChange:a=>{o("country",a?a.value:""),o("state",""),o("city","")},placeholder:s("global.country"),isClearable:!0,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(n,{message:r.country,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"state",value:s("global.state")}),e.jsx(c,{options:j,id:"state",name:"state",value:j.find(a=>a.value===l.state)||null,onChange:a=>{o("state",a?a.value:""),o("city","")},placeholder:s("global.state"),isClearable:!0,isDisabled:!l.country,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(n,{message:r.state,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"city",value:s("global.city")}),e.jsx(c,{options:v,id:"city",name:"city",value:v.find(a=>a.value===l.city)||null,onChange:a=>{o("city",a?a.value:"")},placeholder:s("global.city"),isClearable:!0,isDisabled:!l.state,menuPlacement:"auto",menuShouldScrollIntoView:!1}),e.jsx(n,{message:r.city,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s("global.photoProfile")}),e.jsx($,{id:"image",name:"image",label:s("global.image"),accept:".jpg,.jpeg,.png",maxSizeMB:.5,onChange:a=>o("image",a.target.files[0]),value:l.image,error:r.image})]})]})};export{re as default};
