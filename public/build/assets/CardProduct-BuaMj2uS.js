import{q as j,r,j as e,Y as F,a as N}from"./app-DdujxetC.js";import{R as y}from"./Rating-XxgJT9dk.js";import{g as R}from"./imageHelper-19DfnHcd.js";import{y as n}from"./index-CZ0tZ6fy.js";import{u as T}from"./useTranslation-8BayAZb4.js";import{F as x}from"./HeartIcon-BIzo_fDE.js";import{F as S}from"./HomeLayout-DOTPFD1x.js";function k({product:t,showFavorite:g=!1,isFavorited:s=!1,onRemove:d,favoriteDisplayOnly:b=!1}){const{t:a}=T(),{auth:m}=j().props,[w,c]=r.useState(!1),[f,o]=r.useState(s),l=r.useRef(null);r.useEffect(()=>{o(s)},[s]);const p=()=>{var u,h;if(!m||!m.user){(u=window.setAuthModeState)==null||u.call(window,"login"),(h=window.setShowAuthModalState)==null||h.call(window,!0);return}const i=!s;o(i),!i&&typeof d=="function"&&d(t.id),i?n.success(a("global.addedToFavorites")):n.info(a("global.removedFromFavorites")),l.current&&clearTimeout(l.current),c(!0),l.current=setTimeout(async()=>{try{N.post("/api/favorite",{food_id:t.id})}catch{o(v=>!v),n.error(a("global.errorAddFavorite"))}finally{c(!1)}},800)};return e.jsxs("div",{className:"relative",children:[e.jsxs(F,{href:route("product.detail",{id:t.id}),className:"bg-white h-full rounded-xl shadow cursor-pointer transition-transform duration-200 transform hover:scale-105 relative flex flex-col",style:{overflow:"visible"},children:[e.jsx("img",{alt:t.name,className:"w-full md:h-40 h-28 rounded-t-xl object-cover object-center",height:"180",src:R(t.image),width:"320"}),e.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-xs md:text-md leading-tight",children:t.name}),e.jsxs("p",{className:"text-gray-800 text-xs mb-2",children:["Rp. ",Number(t.price).toLocaleString("id-ID")]}),e.jsx(y,{rating:t.rating,userReviewCount:t.rating_count})]})]}),g&&(b?e.jsx(e.Fragment,{children:s&&e.jsx("span",{className:"absolute top-2 right-2 bg-white p-1 rounded-full shadow-md",title:a(s?"global.addedToFavorites":"global.addToFavorites"),children:e.jsx(x,{className:"w-4 h-4 text-red-500 fill-red-500"})})}):e.jsx("button",{onClick:p,disabled:w,className:"absolute top-2 right-2 bg-white p-1 rounded-full shadow-md hover:bg-gray-100 transition",title:a(f?"global.removeFromFavorites":"global.addToFavorites"),children:f?e.jsx(x,{className:"w-4 h-4 text-red-500 fill-red-500"}):e.jsx(S,{className:"w-4 h-4 text-gray-400"})}))]})}export{k as C};
