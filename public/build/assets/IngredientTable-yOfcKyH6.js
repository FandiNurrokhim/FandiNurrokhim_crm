import{r as s,j as a,a as i}from"./app-DdujxetC.js";import{S as r}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{F as q,C as ee,T as te,a as w}from"./Card-DDsZeuq4.js";import{D as se}from"./DangerButton-CR7n5plE.js";import T from"./CreateModal-BbNmBe-o.js";import ae from"./EditModal-PDnwqpOd.js";import{L as ne}from"./LightboxImage-COwFDN6y.js";import{g as C}from"./getErrorMessage-BiY5rOY1.js";import{u as oe}from"./useTranslation-8BayAZb4.js";import{F as re}from"./TrashIcon-DHaJCAft.js";import"./Checkbox-BbuAp7Rg.js";import"./Modal-C4vY61V8.js";import"./PrimaryButton-DWDteuQq.js";import"./index-Rb7ez85R.js";import"./index-BnYHGNjJ.js";import"./floating-ui.dom-AzuEyJcm.js";import"./transition-BZAsKsJL.js";import"./dialog-Cmhm8y39.js";import"./InputLabel-BzWnVHML.js";import"./TextInput-BmMh6PqU.js";import"./InputError-Cg3yzoP4.js";import"./UploadInputWithView-BeMryQyC.js";import"./XMarkIcon-Duw6_-fQ.js";import"./imageHelper-19DfnHcd.js";const Ne=()=>{const{t,i18n:d}=oe(),[E,y]=s.useState([]),[O,l]=s.useState(!1),[c,f]=s.useState(1),[P,N]=s.useState(1),[h,x]=s.useState(!1),A=()=>x(!h),[B,S]=s.useState(!1),[k,b]=s.useState(null),[v,g]=s.useState(!1),[F,D]=s.useState(null),[L,u]=s.useState(!1),[R,$]=s.useState([]),[M,n]=s.useState(!1),[_,m]=s.useState(!1),[p,z]=s.useState(""),G=e=>{i.get(`/admin/ingredient/${e.id}/edit`).then(o=>{b(o.data.data),S(!0)}).catch(o=>{var I,j;n(!1);const Z=((j=(I=o.response)==null?void 0:I.data)==null?void 0:j.message)||"An error occurred.";r.fire("Error!",Z,"error")})},H=()=>{b(null),S(!1)},J=e=>{D(e),g(!0)},K=()=>{D(null),g(!1)},Q=()=>{n(!0),i.delete(`/admin/ingredient/${F}`).then(()=>{n(!1),g(!1),r.fire(t("global.swalDeleted","Deleted!"),t("ingredient.deletedMessage","Ingredient has been deleted."),"success"),l(e=>!e)}).catch(e=>{n(!1);const o=C(e,t,d.language);r.fire(t("global.swalError","Error!"),o,"error")})},U=e=>{$(e),u(!0)},V=()=>{n(!0),i.post(route("admin.ingredient.bulk-delete"),{ids:R}).then(()=>{n(!1),u(!1),r.fire(t("global.swalDeleted","Deleted!"),t("ingredient.deletedMessage","Ingredient has been deleted."),"success"),l(e=>!e)}).catch(e=>{n(!1);const o=C(e,t,d.language);r.fire("Error!",o,"error")})},W=e=>{z(e),e!==p&&f(1)},X=()=>{m(!0),i.get("/admin/ingredient/data",{params:{page:c,search:p}}).then(e=>{y(e.data.data),N(e.data.last_page),m(!1)}).catch(e=>{m(!1)})};s.useEffect(()=>{X()},[c,p,O]);const Y=[{header:t("global.name"),accessor:e=>d.language==="en"?e.name_en:e.name_id},{header:t("global.image"),accessor:e=>e.image?a.jsx(ne,{src:`/${e.image}`,alt:e.name,className:"h-12 w-full object-cover rounded"}):a.jsx("span",{className:"text-gray-400 italic",children:"-"})},{header:t("global.actions"),accessor:e=>a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs("button",{onClick:()=>G(e),className:"inline-flex items-center rounded-md border border-transparent bg-yellow-400 px-2 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 active:bg-yellow-700",children:[a.jsx(q,{className:"w-5 h-5 me-2 rounded-full bg-yellow-500 p-1 text-white"})," ",a.jsx("span",{children:t("global.edit")})]}),a.jsxs(se,{onClick:()=>J(e.id),children:[a.jsx(re,{className:"w-5 h-5 me-2 rounded-full bg-red-400 p-1 text-white"})," ",a.jsx("span",{children:t("global.delete")})]})]})}];return a.jsxs(ee,{children:[a.jsx(te,{columns:Y,data:E,currentPage:c,totalPages:P,onSearch:W,onPageChange:e=>f(e),onAdd:()=>x(!0),addType:"modal",addButtonText:t("ingredient.pageTitle","Create Ingredient"),AddModalContent:T,selectable:!0,onDeleteSelected:U,isProcessing:_}),a.jsx(T,{isOpen:h,onClose:A,setRefetch:l}),a.jsx(ae,{isOpen:B,onClose:H,ingredient:k,setRefetch:l}),a.jsx(w,{isOpen:v,onClose:K,onDelete:Q,title:t("ingredient.pageTitle","Delete Ingredient"),description:t("ingredient.deleteDescription","Are you sure you want to delete this ingredient? This action cannot be undone."),deleteButtonText:t("ingredient.pageTitle","Delete Ingredient"),isProcessing:M}),a.jsx(w,{isOpen:L,onClose:()=>u(!1),onDelete:V,title:t("ingredient.deleteSelectedTitle","Delete Selected Ingredients"),description:t("ingredient.deleteSelectedDescription","Are you sure you want to delete the selected ingredients? This action cannot be undone."),deleteButtonText:t("ingredient.deleteSelectedButton","Delete Selected"),isProcessing:M})]})};export{Ne as default};
